<%= form_for([@quotation, @item_detail]) do |f| %>
  <% if @item_detail.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@item_detail.errors.count, "error") %> prohibited this item_detail from being saved:</h2>

      <ul>
        <% @item_detail.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :particulars %>
    <br>
    <%= f.text_field :particulars %>
  </div>
  <div class="field">
    <%= f.label :quantity %>
    <br>
    <%= f.text_field :quantity %>
  </div>
  <div class="field">
    <%= f.label :days %>
    <br>
    <%= f.text_field :days %>
  </div>
  <div class="field">
    <%= f.label :price %>
    <br>
    <%= f.text_field :price %>
  </div>
  <%= f.fields_for(:payment_attributes, @item_detail.payment) do |p| %>
    <%= p.hidden_field :id %>
    <%= p.hidden_field :paid_on, :value => @item_detail.payment.nil? ? DateTime.now : @item_detail.payment.paid_on %>
    <div class="field">
      <%= p.label :client_id, 'Vendor' %>
      <br>
      <% clients_array = Client.all.map { |client| [client.name, client.id] } %>
      <%= p.select(:client_id, options_for_select(clients_array, @item_detail.payment.nil? ? 0 : @item_detail.payment.client.id), prompt: 'Select Vendor') %>
    </div>
    <div class="field">
      <%= p.label :amount %>
      <br>
      <%= p.text_field :amount %>
    </div>
  <% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
